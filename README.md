# OpenGLCTRender

Introduction:
This project is used to study OpenGL and do the whole rendering.  
~~It starts take obj file from fiji 3d viewer.~~  
It can read dcm file by itself now.  
Thanks to http://www.opengl-tutorial.org/.  
And my professor, TA and friends.  
dualmc.h and dualmc.hpp are thirdparty files.  

Demo.cpp is the main function.  
test.cpp is the main function used to add and test new function.  
~~img folder is some sample generated by fiji 3d viewer.~~  
dependencies folder includes GLFW, GLEW, GLM and some thirdparties.  

How to play:  
~~sample obj is the cube.obj file, add it into x64\release\img folder.~~  
Use a dcm image sequences, modify PATH variable as your dcm folder path.  
You can choose CONTROLS.CPP. It rotates model so you can see immersive light.  
CONTROLSFORFOV.CPP rotates the view matrix so it is much faster to run than controls. But lights will not change.  
Scroll mouse to scale view Matrix.  
Click the mouse and move it to rotate your point of view.  
↑↓←→ up, down, left and right. (Not available now)   

Pipeline:
Initialization:

1.  Initialize GLEW, GLFW and glm.  
2.  Create a background.  
3.  Load vertex shader and fragment shader.  
4.  Create MVP, view and model matrix.  
5.  Load a folder with several dcm files to get model.  
6.  Scale down vertices and get pivot.  
7.  Calculate weighted vertex normal vector OR surface normal vector.  
8.  Get texture via CT number of each vertex.  

Rendering:
9.  Set light position.
10. Make 3 buffer rendering to get 3 shadow texture of 3 lights.  
11. Do a flexible MVP matrix.
11. Draw triangles.

TODO:  
[x] add light  
[x] add texture  
[x] get normal vector (surface normal)  
[x] ~~get UV coordinate~~ add UV coordinate by myself  
[x] make better shading  
[x] add shadow    
[-] add quaternions(no need)   
[X] add FOV control   
[ ] remove dcm noise  
[-] add thread(a little bit hard)  